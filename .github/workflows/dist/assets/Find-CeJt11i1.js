import{d as k,B as C,o as O,y as g,a as f,c as h,b as a,f as l,t as p,C as u,l as w,v as M,F as D,p as E,E as P,A as _,_ as I}from"./index-Dk3O8imR.js";const F={class:"audio-footer"},T={class:"audio-layout"},$={class:"audio-body"},B=["src"],N={class:"audio-img"},R=["src"],W={class:"audio-context"},q={class:"audio-title"},A={class:"audio-controllers"},z={class:"audio-controller-pre"},U={class:"audio-controller-middle"},X={class:"audio-bar"},j={class:"audio-bar-time-end"},G={class:"audio-show-musicList"},H=["onClick"],J=k({__name:"Find",setup(K){let y=null,b=i=>P.service({target:i}),t=C(),n;O(()=>{t.test(),t.test(),t.test(),n=document.querySelector("audio"),n.addEventListener("durationchange",()=>{t.playState.duration=n.duration,t.playState.isDuration=!0}),n.addEventListener("canplaythrough",()=>{y==null||y.close(),t.playState.isDragProgress=!0}),n.addEventListener("waiting",()=>{y=b(".audio-bar"),t.playState.isDragProgress=!1}),n.addEventListener("timeupdate",()=>{t.playState.progress=n.currentTime}),g(()=>t.playState.play,i=>{i?n.play():n.pause()}),g(()=>t.playState.index,()=>{t.playState.isDragProgress=!1,t.playState.progress=0,t.playState.play=!1,n.load(),_(()=>t.playState.play=!0)}),g(()=>t.playState.progress,i=>{if(t.playState.isDuration){if(i==n.duration){c(t.playState.playOrder);return}let e=document.querySelector(".bar-gray");if(e){let o=e.parentElement.offsetWidth;e.style.width=o*i/t.playState.duration+"px",console.log(e.style.width)}}})});function c(i){if(t.playState.playList.length)switch(i){case"pre":t.playState.index<=0?t.playState.index=t.playState.playList.length-1:t.playState.index-=1;break;case"loop":case"aft":t.playState.index>=t.playState.playList.length-1?t.playState.index=0:t.playState.index+=1;break;case"along":t.playState.isDragProgress=!1,t.playState.progress=0,t.playState.play=!1,n.load(),_(()=>t.playState.play=!0);break;case"random":let o=function(s,r){return s=Math.ceil(s),r=Math.floor(r),Math.floor(Math.random()*(r-s))+s}(0,t.playState.playList.length);o==t.playState.index?t.playState.index>=t.playState.playList.length-1?t.playState.index=0:t.playState.index+=1:t.playState.index=o;break;default:typeof i=="number"&&(t.playState.index=i);break}}function x(){t.playState.playOrder=="along"?t.playState.playOrder="loop":t.playState.playOrder=="loop"?t.playState.playOrder="random":t.playState.playOrder=="random"&&(t.playState.playOrder="along")}function m(i){let e=Math.floor(i/60),o=i%60,s=String(o).padStart(2,"0");return e+":"+Number(s).toFixed(0)}function L(i){if(t.playState.isDragProgress){let e=i.currentTarget,o=e.offsetWidth,r=(i.clientX-e.getBoundingClientRect().left)/o;r=Math.max(0,Math.min(100,r)),n.currentTime=n.duration*r}}return(i,e)=>{var o,s,r,v;return f(),h("div",F,[a("div",T,[a("div",$,[a("audio",{src:(o=l(t).playState.playList[l(t).playState.index])==null?void 0:o.songURL},null,8,B),a("div",N,[a("img",{src:(s=l(t).playState.playList[l(t).playState.index])==null?void 0:s.songImg},null,8,R)]),a("div",W,[a("div",q,[a("h3",null,p((r=l(t).playState.playList[l(t).playState.index])==null?void 0:r.songName),1),a("p",null,"-- "+p((v=l(t).playState.playList[l(t).playState.index])==null?void 0:v.songSinger),1)]),a("div",A,[a("div",z,[e[5]||(e[5]=a("div",{class:"audio-speed iconfont icon-bofangsudu"},null,-1)),a("div",{class:u(["audio-volume","iconfont",l(t).playState.volume===0?"icon-volumnMute_1":" icon-volumnLouder_1"])},null,2),a("div",{class:u(["audio-playOrder","iconfont",l(t).playState.playOrder==="loop"?"icon-bofang-xunhuanbofang":l(t).playState.playOrder==="along"?"icon-a-27Fdancixunhuanbofang":"icon-xunhuanbofang"]),onClick:x},null,2)]),a("div",U,[a("div",{class:"audio-pre iconfont icon-shangyishou_huaban",onClick:e[0]||(e[0]=d=>c("pre"))}),a("div",{class:u(["audio-play","iconfont",l(t).playState.play?"icon-bofang":"icon-bofanganniu"]),onClick:e[1]||(e[1]=d=>{l(t).playState.play=!l(t).playState.play})},null,2),a("div",{class:"audio-aft iconfont icon-xiayishou_huaban",onClick:e[2]||(e[2]=d=>c("aft"))})]),a("div",{class:u(["audio-musicList","iconfont",l(t).playState.playList.length===0?"icon-MuteOutline":"icon-music-list"]),onClick:e[3]||(e[3]=d=>l(t).playState.isShowList=!l(t).playState.isShowList)},null,2)]),a("div",X,[a("div",{class:"audio-bar-time-start",onClick:e[4]||(e[4]=d=>l(n).currentTime=0)},p(m(l(t).playState.progress)),1),a("div",{class:"audio-bar-progress",onClick:L},e[6]||(e[6]=[a("div",{class:"bar-gray"},null,-1)])),a("div",j,p(m(l(t).playState.duration)),1)])])]),w(a("div",G,[(f(!0),h(D,null,E(l(t).playState.playList,(d,S)=>(f(),h("div",{class:"audio-musicList-item",key:S,onClick:Q=>c(S)},[a("div",{class:u(l(t).playState.index==S?"item-current":"")},null,2),a("strong",null,p(S+1)+".",1),a("h4",null,p(d.songName),1),a("p",null,"-- "+p(d.songSinger),1)],8,H))),128))],512),[[M,l(t).playState.isShowList]])])])}}}),Y=I(J,[["__scopeId","data-v-3d632fc7"]]);export{Y as default};
